# ИДЗ 3. Сетевые протоколы. Использование TCP.

**Дельцов Даниил Витальевич БПИ226** 

**Вариант 6**  

Условие: Базу данных, представленную массивом целых положительных чисел, разделяют два типа процессов: N читателей и K писателей.   
Читатели периодически просматривают случайные записи базы данных и выводя номер свой номер (например, PID), индекс записи, ее значение, а также вычисленное значение факториала.  
Писатели изменяют случайные записи на случайное число и также выводят информацию о своем номере, индексе записи, старом значении и новом значении.   
Предполагается, что в начале БД находится в непротиворечивом состоянии (все числа отсортированы).   
Каждая отдельная новая запись переводит БД из одного непротиворечивого состояния в другое (то есть, новая сортировка может поменять индексы записей или переставить числа).  
Транзакции выполняются в режиме «грязного чтения». То есть, процесс–писатель не может получить доступ к БД только в том случае, если ее уже занял другой процесс-писатель, а процессы-читатели ему не мешают обратиться к БД.  
Поэтому он может изменять базу данных, когда в ней находятся читатели.  
Создать многопроцессное приложение с потоками-писателями и потоками-читателями.  
Каждый читатель и писатель моделируется отдельным процессом.  

Сценарий использования:
Предположим, что в университете или компании необходимо постоянно обновлять и анализировать большие объемы данных. Писатели могут быть процессами, обновляющими записи о последних событиях или транзакциях, в то время как читатели могут анализировать эти данные для генерации отчетов или вывода статистики.

**4-5 баллов** - ihw_v1

Серверная программа представляет собой многопроцессное приложение, которое моделирует базу данных и взаимодействует с клиентами, предоставляя операции чтения и записи.
Реализованно: 
- [x] Создается hазделяемая память и отображается в адресное пространство сервера, чтобы обеспечить доступ к данным между процессами.
- [x] Инициализируется мьютекс для обеспечения синхронизации доступа к разделяемой памяти между процессами.
- [x] Создается сокет для прослушивания входящих соединений.
- [x] IP адреса и порты задаются в командной строке, для обеспечения гибкой подстройки к любой сети -> Сокет привязывается к указанному IP-адресу и порту -> начинает прослушивание входящих соединений.
- [x] Для каждого нового соединения создается дочерний процесс с помощью fork() -> В дочернем процессе закрывается неиспользуемый сокет сервера -> В дочернем процессе вызывается функция handle_client() для обработки запросов клиента.
- [x] Основной процесс сервера закрывает сокет сервера и удаляет разделяемую память при завершении работы.

Мьютексы обеспечивают корректное взаимодействие процессов при чтении и записи данных, предотвращая гонки данных.
Многопроцессная архитектура позволяет обрабатывать несколько клиентов одновременно.
Сокеты используются для установления соединений между сервером и клиентами, где клиенты могут отправлять запросы на чтение или запись данных, а сервер отвечает на эти запросы, выполняя соответствующие операции с данными.




